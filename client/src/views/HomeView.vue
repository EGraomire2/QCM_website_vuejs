<template>
  <div>
    <!-- Integrate the Header component with dynamic navigation -->
    <Header />

    <main>
      <section>
        <h2>Pourquoi choisir SOSprÃ©pa ?</h2>
        <ul>
          <li>âœ… AlignÃ© avec le programme EFREI</li>
          <li>âœ… RÃ©vision efficace et interactive</li>
          <li>âœ… Accessible sur tous les appareils</li>
        </ul>
      </section>

      <section>
        <h2>Pour qui ?</h2>
        <p>ğŸ“ Ã‰lÃ¨ves de 1Ê³áµ‰ et 2áµ‰ annÃ©e motivÃ©s Ã  rÃ©ussir leurs CC et Ã  gagner en confiance.</p>
      </section>

      <section>
        <h2>Comment Ã§a marche ?</h2>
        <ol>
          <li>ğŸ“‚ Choisis une matiÃ¨re</li>
          <li>ğŸ“ Lance un QCM</li>
          <li>ğŸ“Š Analyse tes rÃ©sultats</li>
          <li>ğŸ” Progresse Ã  ton rythme</li>
        </ol>

        <!-- Conditional button based on authentication -->
        <button 
          v-if="isAuthenticated" 
          id="boutonaction" 
          @click="goToSelectQcm"
        >
          Passer Ã  l'action !
        </button>
        <button 
          v-else 
          id="boutonaction" 
          @click="goToLogin"
        >
          Connectez-vous pour commencer !
        </button>
      </section>

      <section>
        <h2>TÃ©moignages</h2>
        <blockquote>"C'est exactement ce qu'il me fallait pour mes rÃ©visions !"</blockquote>
        <blockquote>"Super simple d'utilisation et trÃ¨s pratique pour les contrÃ´les !"</blockquote>
      </section>
    </main>

    <footer>
      <p>&copy; 2025 QCM Website</p>
    </footer>
  </div>
</template>

<script>
import Header from '@/components/Header.vue';
import { useAuthStore } from '@/stores/auth';

export default {
  name: 'HomeView',
  
  components: {
    Header
  },
  
  setup() {
    const authStore = useAuthStore();
    return { authStore };
  },
  
  computed: {
    isAuthenticated() {
      // Use the auth store instead of directly accessing localStorage
      return this.authStore.isAuthenticated;
    }
  },
  
  methods: {
    goToSelectQcm() {
      // Navigate to QCM selection page using Vue Router
      this.$router.push({ name: 'SelectQCM' });
    },
    
    goToLogin() {
      // Navigate to login page using Vue Router
      this.$router.push({ name: 'Login' });
    }
  }
};
</script>

<style scoped>
@import '../assets/create-qcm.css';
</style>
